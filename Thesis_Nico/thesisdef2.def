% Captions
\addtolength{\captionmargin}{24pt}
\allsectionsfont{\sf}

% The abstracts:
\newenvironment{abstract}
  {\hfill\begin{minipage}{0.9\textwidth}\setlength{\parindent}{0.05\textwidth}
   \noindent\small\textbf{Abstract.}}
  {\end{minipage}\newpage}


% Chapter headings:
\makeatletter
\def\@makechapterhead#1{%
  \vspace*{50\p@}%
  {
   \parindent \z@ \raggedright \normalfont
    \hrule
    \vspace{16pt}%
    \ifnum \c@secnumdepth >\m@ne
        \Huge\thechapter % Chapter number
        \normalsize
        \par\nobreak
        \vskip 20\p@
    \fi
    \interlinepenalty\@M
    \LARGE \textsf{#1}\par
    \vspace{16pt}%
    \rule{\textwidth}{1.5pt}
    %\hrule
    \nobreak
    \vskip 40\p@
  }}
\def\@makeschapterhead#1{%
  \vspace*{50\p@}%
  {\parindent \z@ \raggedright \normalfont
    \hrule
    \vspace{16pt}%
    \interlinepenalty\@M
    \LARGE \textsf{#1}\par
    \vspace{16pt}%
    \hrule
    \nobreak
    \vskip 40\p@
  }}
\makeatother


%% Headers and footers.
\pagestyle{fancy}
\fancyhf{}
\setlength{\headheight}{15.0pt}
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\fancyfoot[LE,RO]{\thepage}          %page number
\renewcommand{\headrulewidth}{0.4pt} %horiz line   
%\renewcommand{\footrulewidth}{0.4pt} %horiz line   


%% headers
\makeatletter
\let\@ldfrontmatter=\frontmatter% save old \maketitle macro
\def\frontmatter{%
  \@ldfrontmatter%
  \fancyhead[LE]{}
  \fancyhead[RO]{}
}

\let\@ldmainmatter=\mainmatter% save old \maketitle macro
\def\mainmatter{%
  \@ldmainmatter%
  \fancyhead[LE]{\textsf{\chaptername \ \thechapter.\ }}
  \fancyhead[RO]{\textsf{\leftmark}}
}

\let\@ldbackmatter=\backmatter% save old \maketitle macro
\def\backmatter{%
  \@ldbackmatter%
  \fancyhead[LE]{}
  \fancyhead[RO]{}
}
\makeatother
%\fancypagestyle{plain}{\fancyhead{}} %Redefines plain style so \chapter doesn't revert to the normal page style

% plain pages
\fancypagestyle{plain}{%
    \fancyhf{} %
    \fancyfoot[LE,RO]{\thepage} %
    \renewcommand{\headrulewidth}{0pt}%
}

\makeatletter
\renewenvironment{thebibliography}[1]
     {\section*{\bibname}% 
      %\@mkboth{\bibname}{\bibname}%
       \list{\@biblabel{\@arabic\c@enumiv}}%
           {\settowidth\labelwidth{\@biblabel{#1}}%
            \leftmargin\labelwidth
            \advance\leftmargin\labelsep
            \@openbib@code
            \usecounter{enumiv}%
            \let\p@enumiv\@empty
            \renewcommand\theenumiv{\@arabic\c@enumiv}}%
      \sloppy
      \clubpenalty4000
      \@clubpenalty \clubpenalty
      \widowpenalty4000%
      \sfcode`\.\@m}
     {\def\@noitemerr
       {\@latex@warning{Empty `thebibliography' environment}}%
      \endlist}
\makeatother


